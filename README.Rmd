---
output: 
   github_document
---


```{r, setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE,
                      out.width = "100%",
                      collapse = TRUE)

library(readr)
library(glue)
library(dplyr)
library(gt)
library(gtsummary)
```

# Indiana COVID-19 Tracker  
![Noon Update](https://github.com/ercbk/Indiana-COVID-19-Tracker/workflows/Noon%20Update/badge.svg)
![Evening Update](https://github.com/ercbk/Indiana-COVID-19-Tracker/workflows/Evening%20Update/badge.svg)

This repository collects and processes datasets for [Indiana-COVID-19-Website](https://github.com/ercbk/Indiana-COVID-19-Website). It also has creates charts for the ["Static Charts"](https://ercbk.github.io/Indiana-COVID-19-Website/static.html) tab of the Indiana COVID-19 Tracker website.  
The changelog for the entire Indiana COVID-19 Tracker project is located in [NEWS.md](https://github.com/ercbk/Indiana-COVID-19-Tracker/blob/master/NEWS.md).  
\
\
\


The data files described in this dictionary are in the [data](https://github.com/ercbk/Indiana-COVID-19-Tracker/tree/master/data) directory of this repository.  

## Datasets 

```{r, asis=TRUE}

data_dict_tbl <- tibble(
  file_name = c("age-cases-heat.rds",
                "age-death-line.rds",
                "age-hosp-line.rds",
                "beds-vents-complete.csv",
                "hosp-msas-line.rds",
                "hosp-react-tab.rds"),
  chart_name = c("Historical Weekly COVID-19 Cases by Age",
                 "Historical Weekly COVID-19 Deaths by Age Group",
                 "Historical Daily COVID-19 Hospital Admissions by Age Group",
                 "Historical Daily ICU Beds and Ventilators",
                 "Historical State Hospital Staff Shortages, Hospital Mortality Rate, Hospital Admissions and Ages Skewness of Admissions",
                 "Local Hospital Capacity"),
  chart_url = c("https://ercbk.github.io/Indiana-COVID-19-Website/demographics.html#cases-by-age",
                "https://ercbk.github.io/Indiana-COVID-19-Website/demographics.html#deaths-by-age",
                "https://ercbk.github.io/Indiana-COVID-19-Website/hospitals.html#state-hospital-mortality-staffing-shortages-admissions",
                "https://ercbk.github.io/Indiana-COVID-19-Website/static.html#Hospitalizations,_ICU_Beds_and_Ventilator_Availability",
                "https://ercbk.github.io/Indiana-COVID-19-Website/hospitals.html#state-hospital-mortality-staffing-shortages-admissions",
                "https://ercbk.github.io/Indiana-COVID-19-Website/hospitals.html#local-hospital-capacity"),
  data_url = c("https://raw.githack.com/ercbk/Indiana-COVID-19-Tracker/master/data-dictionary.html#Historical_Weekly_COVID-19_Cases_by_Age",
               "https://raw.githack.com/ercbk/Indiana-COVID-19-Tracker/master/data-dictionary.html#Historical_Weekly_COVID-19_Deaths_by_Age_Group",
               "https://raw.githack.com/ercbk/Indiana-COVID-19-Tracker/master/data-dictionary.html#Historical_Daily_COVID-19_Hospital_Admissions_by_Age Group",
               "https://raw.githack.com/ercbk/Indiana-COVID-19-Tracker/master/data-dictionary.html#Historical_Daily_ICU_Beds_and_Ventilators",
               "https://raw.githack.com/ercbk/Indiana-COVID-19-Tracker/master/data-dictionary.html#Historical_State_Hospital_Staff_Shortages_Hospital_Mortality_Rate_Hospital_Admissions_and_Ages_Skewness_of_Admissions",
               "https://raw.githack.com/ercbk/Indiana-COVID-19-Tracker/master/data-dictionary.html#Local_Hospital_Capacity")
) %>% 
  mutate(chart_html = purrr::map2(chart_url, chart_name, ~htmltools::a(href = .x, .y)),
         chart_link = purrr::map(chart_html, ~gt::html(as.character(.x))),
         dict_html = purrr::map(data_url, ~htmltools::a(href = .x, "link")),
         dict_link = purrr::map(dict_html, ~gt::html(as.character(.x)))) %>% 
  select(file_name, chart_link, dict_link) %>% 
  gt() %>% 
  cols_label(file_name = "File Name",
             chart_link = "Chart",
             dict_link = "Data Dictionary") %>% 
  tab_options(table.align = "left") %>% 
  as_raw_html()

data_dict_tbl

```

